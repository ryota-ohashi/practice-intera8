const d=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}};d();class c{constructor(){this.setParams(),this.bind()}setParams(){this.startBtn=document.querySelector(".js-startBtn"),this.roulette=document.querySelector(".js-roulette"),this.error=document.querySelector(".js-error"),this.input=document.querySelectorAll(".js-input"),this.result=document.querySelector(".js-result"),this.winner=document.querySelector(".js-winner"),this.StartFlag=!1,this.inputedCount=0,this.colorList=["#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF"],this.bindRotate=this.rotate.bind(this),this.bindJudgeInput=this.judgeInput.bind(this)}rotate(){if(this.judgeStartFlag(),this.StartFlag)this.error.textContent="";else{this.error.textContent="2\u9805\u76EE\u4EE5\u4E0A\u8A2D\u5B9A\u3057\u3066\u4E0B\u3055\u3044\u3002";return}const e=window.getComputedStyle(this.roulette).transform,r=3600+Math.floor(359*Math.random()),n=[{transform:"rotate("+e+"deg)"},{transform:"rotate("+r+"deg)"}],t={duration:3e3,easing:"ease-in-out"};this.roulette.animate(n,t).addEventListener("finish",()=>{const i=r%360;this.roulette.style.transform="rotate("+i+"deg)";const u=this.judgeWinner(i),a=document.querySelector('[data-color="'+u+'"]').nextElementSibling.value;this.winner.textContent=a+"\u304C\u9078\u3070\u308C\u307E\u3057\u305F\uFF01\uFF01",this.result.classList.add("show"),setTimeout(()=>{this.result.classList.remove("show")},3e3)})}judgeWinner(e){const r=360-e,n=360/this.inputedCount;for(let t=0;t<this.inputedCount;t++)if(r>=n*t&&r<n*(t+1))return this.colorList[t]}judgeInput(){let e=0;this.input.forEach(r=>{r.value!==""?(this.setLabelColor(r,e),e++):this.removeLabelColor(r)}),this.setRoulette(e)}judgeStartFlag(){this.inputedCount=0,this.input.forEach(e=>{e.value!==""&&this.inputedCount++}),this.inputedCount>1?this.StartFlag=!0:this.StartFlag=!1}setLabelColor(e,r){e.parentElement.querySelector("span").setAttribute("data-color",this.colorList[r]),e.parentElement.querySelector("span").style.backgroundColor=this.colorList[r]}removeLabelColor(e){e.parentElement.querySelector("span").removeAttribute("data-color"),e.parentElement.querySelector("span").style.backgroundColor="#fff"}setRoulette(e){const r=360/e;let n="conic-gradient(";for(let t=0;t<e;t++)t===0?n+=this.colorList[0]+" 0deg "+r+"deg":n+=","+this.colorList[t]+" "+r*t+"deg "+r*(t+1)+"deg";n+=")",this.roulette.style.background=n}bind(){this.input.forEach(e=>{e.addEventListener("input",this.bindJudgeInput)}),this.startBtn.addEventListener("click",this.bindRotate)}}var s=s||{};s={init:function(){this.setParams(),this.bind()},setParams:function(){},bind:function(){new c}};window.addEventListener("DOMContentLoaded",()=>{s.init()});
