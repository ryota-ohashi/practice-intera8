const d=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}};d();class c{constructor(){this.setParams(),this.bind()}setParams(){this.startBtn=document.querySelector(".js-startBtn"),this.roulette=document.querySelector(".js-roulette"),this.error=document.querySelector(".js-error"),this.input=document.querySelectorAll(".js-input"),this.result=document.querySelector(".js-result"),this.winner=document.querySelector(".js-winner"),this.StartFlag=!1,this.inputedCount=0,this.colorList=["#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF"],this.bindRotate=this.rotate.bind(this),this.bindJudgeInput=this.judgeInput.bind(this)}rotate(){if(this.judgeStartFlag(),this.StartFlag)this.error.textContent="";else{this.error.textContent="2\u9805\u76EE\u4EE5\u4E0A\u8A2D\u5B9A\u3057\u3066\u4E0B\u3055\u3044\u3002";return}const t=window.getComputedStyle(this.roulette).transform,e=3600+Math.floor(360*Math.random()),r=[{transform:"rotate("+t+"deg)"},{transform:"rotate("+e+"deg)"}],i={duration:3e3,easing:"ease-in-out"};this.roulette.animate(r,i).addEventListener("finish",()=>{const n=e%360;this.roulette.style.transform="rotate("+n+"deg)";const a=this.judgeWinner(n),u=document.querySelector('[data-color="'+a+'"]').nextElementSibling.value;this.winner.textContent=u+"\u304C\u9078\u3070\u308C\u307E\u3057\u305F\uFF01\uFF01",this.result.classList.add("show"),setTimeout(()=>{this.result.classList.remove("show")},3e3)})}judgeWinner(t){const e=360-t,r=360/this.inputedCount;for(let i=0;i<this.inputedCount;i++)if(e>r*i&&e<=r*(i+1))return this.colorList[i]}judgeInput(){let t=0;this.input.forEach(e=>{e.value!==""?(this.setLabelColor(e,t),t++):this.removeLabelColor(e)}),this.setRoulette(t)}judgeStartFlag(){this.inputedCount=0,this.input.forEach(t=>{t.value!==""&&this.inputedCount++}),this.inputedCount>1?this.StartFlag=!0:this.StartFlag=!1}setLabelColor(t,e){t.parentElement.querySelector("span").setAttribute("data-color",this.colorList[e]),t.parentElement.querySelector("span").style.backgroundColor=this.colorList[e]}removeLabelColor(t){t.parentElement.querySelector("span").removeAttribute("data-color"),t.parentElement.querySelector("span").style.backgroundColor="#fff"}setRoulette(t){const e=360/t;let r="conic-gradient(";t>0&&(r+=this.colorList[0]+" 0deg "+e+"deg"),t>1&&(r+=","+this.colorList[1]+" "+e+"deg "+e*2+"deg"),t>2&&(r+=","+this.colorList[2]+" "+e*2+"deg "+e*3+"deg"),t>3&&(r+=","+this.colorList[3]+" "+e*3+"deg "+e*4+"deg"),t>4&&(r+=","+this.colorList[4]+" "+e*4+"deg "+e*5+"deg"),t>5&&(r+=","+this.colorList[5]+" "+e*5+"deg "+e*6+"deg"),r+=")",this.roulette.style.background=r}bind(){this.input.forEach(t=>{t.addEventListener("input",this.bindJudgeInput)}),this.startBtn.addEventListener("click",this.bindRotate)}}var s=s||{};s={init:function(){this.setParams(),this.bind()},setParams:function(){},bind:function(){new c}};window.addEventListener("DOMContentLoaded",()=>{s.init()});
